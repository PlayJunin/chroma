<!-- Mbe 13/10/21 --> 
<!-- Augmented Reality on the Web with Chroma key and custom pattern --> 
<html>
<head>
<title>AR.JS-AFrame-ChromaKey</title>
<script src="js/aframe.min.js"></script>
<script src="js/aframe-ar.js"></script>
<script src="js/aframe-extras.loaders.min.js"></script>
<script src="js/aframe-chromakey-material.min.js"></script>
</head>
	
<div style='position: fixed; top: 100px; width:100%; text-align: center; z-index: 1;'>
	<button>
		Habilitar Sonido
	</button>
</div>

<meta name="apple-mobile-web-app-capable" content="yes">
<body style='margin : 0px; overflow: hidden;'>
<a-scene embedded arjs="debugUIEnabled: false; patternRatio: 0.90" vr-mode-ui="enabled: false">   
<a-marker preset='custom' type='pattern' url='playqrch.patt'>
<video type="video/mp4" style="opacity: 0" id="mivideo" crossOrigin="anonymous" playsinline webkitplaysinline autoplay loop controls muted="false" src="mbe.mp4"></video>
<a-video material="shader: chromakey; src: #mivideo; color: 0.1 0.9 0.2" src="#mivideo" position="0 0 0" scale="3 3 3" rotation="270 0 0" ></a-video>
	<!--https://github.com/nikolaiwarner/aframe-chromakey-material -->
	<!--
	<a-plane 
        material="shader: chromakey; src: #greenscreenvideo; color: 0.1 0.9 0.2" 
        position="0 1 -10" 
        scale="15 25 15"
	></a-plane>
	-->
<script> 
	var m = document.querySelector("a-marker")
	m.addEventListener("markerFound", (e)=>{
		console.log("found")
		var v = document.querySelector('#mivideo').play();
	})
      
	m.addEventListener("markerLost", (e)=>{
		console.log("lost")
		var v = document.querySelector('#mivideo').pause();
	})

	document.querySelector("button").addEventListener("click", (e)=>{
		console.log("Activar Sonido")
		var v = document.querySelector('#mivideo').muted=false;
	})
</script>
     
	</a-marker>
	<a-entity camera></a-entity>
	</a-scene>
</body>
